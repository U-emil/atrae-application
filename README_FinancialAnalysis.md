# 財務データ分析とクラスタリング

## 目的
本プロジェクトでは、日本の上場企業（トヨタ、ホンダ、日産、スズキ、マツダ）の**財務データを取得・分析し、K-Meansクラスタリングを用いて企業の分類を行う** ことを目的としています。  
財務指標の可視化や機械学習によるパターン認識を通じて、企業の特性を明確にし、財務の健全性や成長性を評価します。

## 使用技術・手法
- **Python / Jupyter Notebook**
- **データ取得:** `yfinance` を使用して企業の財務データを取得
- **データ処理:** pandas による欠損値処理、標準化 (`StandardScaler`)
- **財務比率分析:** 流動比率・自己資本比率・ROE・ROAの算出
- **クラスタリング:** `K-Means` による企業分類
- **可視化:** Matplotlib / Seaborn を用いたデータの視覚化（散布図、エルボー法）

## 実行方法
### **必要なライブラリのインストール**
環境に応じて以下のコマンドを実行し、必要なライブラリをインストールしてください。

```sh
pip install yfinance pandas matplotlib seaborn scikit-learn
```

### **Jupyter Notebook の実行**
1. `financial_analysis.ipynb` を開く
2. セルを上から順に実行することで、財務データの取得・分析・可視化が行われます。

```sh
jupyter notebook financial_analysis.ipynb
```

## **重要: `yfinance` を用いたデータ取得時のエラーについて**
2025年2月19日以降、一部の環境で `yfinance` を使用して株価データや財務データを取得する際に **エラーが発生する可能性があります**。  
私の環境では `yfinance` をアップグレードすることで正常に実行できました。  
**もしエラーが発生した場合は、以下のコマンドを実行し、`yfinance` のバージョンを最新にしてください。**

```sh
pip install --upgrade yfinance
```

## **データの流れ**
1. **企業の財務データ取得**
   - `yfinance` を用いて **貸借対照表・損益計算書・キャッシュフロー計算書** を取得
   - CSV形式で保存（ローカル環境にデータを蓄積）

2. **財務指標の計算**
   - **安全性指標:** 流動比率（Current Ratio）、自己資本比率（Equity Ratio）
   - **収益性指標:** ROE（株主資本利益率）、ROA（総資産利益率）

3. **データの可視化**
   - **棒グラフ:** 各企業の安全性指標（流動比率・自己資本比率）
   - **折れ線グラフ:** ROE・ROAの推移
   - **散布図:** 企業のクラスタリング結果（流動比率×自己資本比率、ROE×ROA）

4. **クラスタリング**
   - **標準化 (`StandardScaler`)**
   - **エルボー法で適切なクラスタ数（K）を決定**
   - **K-Means で企業分類**
   - **クラスタごとの平均財務比率を算出し、特徴を分析**

## 結果の概要
- **エルボー法により、最適なクラスタ数を4と判定**
- **K-Means によるクラスタリングで、各企業を異なる財務特性に基づき分類**
- **クラスタごとの安全性・収益性指標を比較し、成長性や安定性の違いを可視化**
- **可視化結果をもとに、財務健全性が高い企業、リスクの高い企業などを特定**

## 応募者の貢献
- **データの取得から分析、クラスタリングまでの一連のプロセスを設計・実装**
- **複数の企業データを統合し、比較可能な財務指標を作成**
- **K-Means クラスタリングを適用し、企業のグルーピングを実施**
- **可視化を用いて、各クラスタの特徴を直感的に理解できるよう工夫**
